{% comment %}
Homepage Reviews Highlights Include
- Renders top N reviews from _data/reviews.yml as trust cards
- Params: limit (default 3), eyebrow, title, summary, cta_url, cta_label
Usage: {% include reviews-highlights.html limit=3 %}
{% endcomment %}
{% assign all = site.data.reviews.reviews | default: [] %}
{% assign limit = include.limit | default: 3 %}
{% assign items = all | slice: 0, limit %}
<section class="section reviews" aria-labelledby="reviews-title">
  <div class="container">
    <div class="section-header">
      <p class="eyebrow">{{ include.eyebrow | default: 'Client feedback' }}</p>
      <h2 id="reviews-title">{{ include.title | default: 'Why South Jersey Homeowners Trust Tillerstead' }}</h2>
      <p>{{ include.summary | default: 'Straightforward communication, clean job sites, and durable tile and finish work.' }}</p>
    </div>

    {% if items and items.size > 0 %}
      <ul class="cards cards--3col" role="list" aria-label="Highlighted client reviews">
        {% for r in items %}
          <li class="card card--review" itemscope itemtype="https://schema.org/Review">
            <div class="card-rating" aria-label="{{ r.rating | default: 5 }} out of 5 stars" role="img">
              {% assign stars = r.rating | default: 5 %}
              {% for i in (1..5) %}
                <span class="star{% if i <= stars %} star--filled{% endif %}" aria-hidden="true">{% if i <= stars %}★{% else %}☆{% endif %}</span>
              {% endfor %}
              <meta itemprop="reviewRating" content="{{ stars }}" />
            </div>
            {% if r.text %}<p class="card-quote">{{ r.text }}</p>{% endif %}
            <p class="card-author">
              {% if r.name %}<strong id="review--name-{{ forloop.index }}">{{ r.name }}</strong>{% endif %}
              {% if r.source %}<span class="card-role"> · {{ r.source }}</span>{% endif %}
            </p>
          </li>
        {% endfor %}
      </ul>
    {% endif %}

    <div class="section-action">
      <a href="{{ include.cta_url | default: '/reviews/' | relative_url }}" class="btn btn--primary">{{ include.cta_label | default: 'Read more reviews' }}</a>
    </div>
  </div>
</section>
