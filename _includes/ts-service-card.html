{% assign icon = include.icon | default: 'tile' %}
{% assign card_id = include.id | default: include.title | slugify %}
{% assign aria_label = include.title | prepend: 'Service card: ' %}
{% capture icon_svg %}
  {% case icon %}
  {% when 'tile', 'flooring', 'waterproof' %}
    <svg class="ts-service-card__icon-mark ts-icon ts-icon--tile" viewBox="0 0 48 48" aria-hidden="true" focusable="false">
      <rect x="4" y="4" width="16" height="16" rx="2" class="ts-icon__stroke"></rect>
      <rect x="28" y="4" width="16" height="16" rx="2" class="ts-icon__stroke"></rect>
      <rect x="4" y="28" width="16" height="16" rx="2" class="ts-icon__stroke"></rect>
      <path d="M28 28h16v8c0 3.314-2.686 6-6 6H28V28Z" class="ts-icon__stroke"></path>
      <path d="M4 24h40M24 4v40" class="ts-icon__stroke"></path>
    </svg>
  {% when 'paint', 'trim', 'remodeling' %}
    <svg class="ts-service-card__icon-mark ts-icon ts-icon--remodel" viewBox="0 0 48 48" aria-hidden="true" focusable="false">
      <path d="M6 22 24 6l18 16" class="ts-icon__stroke"></path>
      <path d="M12 22v18h10V30h4v10h10V22" class="ts-icon__stroke"></path>
      <path d="M18 38h12" class="ts-icon__stroke"></path>
    </svg>
  {% when 'maintenance' %}
    <svg class="ts-service-card__icon-mark ts-icon ts-icon--maintenance" viewBox="0 0 48 48" aria-hidden="true" focusable="false">
      <circle cx="16" cy="16" r="6" class="ts-icon__stroke"></circle>
      <path d="M6 40c1.5-5.5 5-10 10-10s8.5 4.5 10 10" class="ts-icon__stroke"></path>
      <path d="M32 10l4-4 6 6-4 4" class="ts-icon__stroke"></path>
      <path d="M28 14l-2 6 6-2" class="ts-icon__stroke"></path>
    </svg>
  {% else %}
    <svg class="ts-service-card__icon-mark ts-icon ts-icon--default" viewBox="0 0 48 48" aria-hidden="true" focusable="false">
      <path d="M10 34 19.5 24.5" class="ts-icon__stroke"></path>
      <path d="M22 12a8 8 0 0 1 11.3 11.3L26 30.5 17.5 22l5.3-5.3A4 4 0 0 0 22 12Z" class="ts-icon__stroke"></path>
      <path d="M14 30 10 40l10-4" class="ts-icon__stroke"></path>
    </svg>
  {% endcase %}
{% endcapture %}

<article class="card card--service ts-service-card" role="listitem" id="{{ card_id }}" aria-label="{{ aria_label }}">
  <header class="card-header">
    <span class="ts-service-card__icon" aria-hidden="true">{{ icon_svg | strip }}</span>
    <div>
      <p class="ts-service-card__tagline">
        {{ include.tagline | default: 'TCNA-compliant scope, transparent math, and NJ HIC #13VH12098700' }}
      </p>
      <h3 class="card-title">{{ include.title }}</h3>
    </div>
  </header>

  <div class="ts-service-card__body">
    <p class="card-desc">
      {{ include.description | default: 'All work performed to TCNA 2024 standards and NJ Consumer Fraud Act requirements. Detailed scope, transparent pricing, and documented methodsâ€”no shortcuts, no surprises.' }}
    </p>

    {% if include.details %}
      <ul class="ts-service-card__points">
        {% assign detail_items = include.details %}
        {% if detail_items contains '|' %}
          {% assign detail_items = detail_items | split: '|' %}
        {% elsif detail_items contains ';' %}
          {% assign detail_items = detail_items | split: ';' %}
        {% elsif detail_items contains ',' %}
          {% assign detail_items = detail_items | split: ',' %}
        {% endif %}
        {% for item in detail_items %}
          {% assign trimmed = item | strip %}
          {% if trimmed != '' %}
            <li>{{ trimmed }}</li>
          {% endif %}
        {% endfor %}
      </ul>
    {% endif %}
  </div>

  <footer class="card-footer">
    <a class="ts-service-card__link" href="{% if include.url %}{{ include.url | relative_url }}{% else %}/contact{% endif %}" aria-label="Learn more about {{ include.title | default: 'this service' }}">
      <span>
        {% if include.url %}
          Learn more
        {% else %}
          Request a consultation
        {% endif %}
      </span>
      <span aria-hidden="true">&rarr;</span>
    </a>
  </footer>
</article>
