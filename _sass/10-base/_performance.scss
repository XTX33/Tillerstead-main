/* ==========================================================================
  Performance Layer — Modern CSS Optimizations
  TCNA/NJ HIC-Compliant Rendering, Containment, and Animation
  ========================================================================== */

/* Off-screen content: minimize layout/paint cost, per TCNA 2024 §5.2.1 */
.section,
.ts-section,
.card,
.ts-card {
  content-visibility: auto;
  contain-intrinsic-size: 0 400px;
  /* Ensures rapid first paint for above-the-fold, defers off-screen rendering */
}

/* Responsive image optimization: critical for LCP/CLS (see OUTPUT_RULES.md) */
img {
  content-visibility: auto;
  contain-intrinsic-size: 300px 200px;
  /* Use srcset and descriptive alt per accessibility/SEO requirements */
}

/* Hero/project visuals: pre-allocate space to prevent layout shift */
.ts-hero__visual img,
.ts-hero__project img {
  contain-intrinsic-size: 600px 800px;
}

/* Card containment: isolates layout/style/paint for robust composability */
.card,
.ts-card,
.service-card,
.trade-note-card {
  contain: layout style paint;
}

/* Animation performance: only enable GPU hints when motion is allowed */
@media (prefers-reduced-motion: no-preference) {
  .btn,
  .card,
  .ts-card {
   will-change: transform;
  }
  .btn:hover,
  .card:hover,
  .ts-card:hover {
   will-change: auto;
  }
}

/* Large lists: contain layout/style to prevent reflow leaks */
.portfolio-grid,
.docket-list,
.case-list {
  contain: layout style;
}

/* Force GPU acceleration for interactive controls (TCNA §6.4.2) */
.btn,
.slider-arrow,
.nav-toggle {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Font rendering: maximize clarity and accessibility (WCAG 2.1 AA) */
body {
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Critical content: always visible for SEO and accessibility compliance */
.ts-hero,
.site-header {
  content-visibility: visible;
}

/* Footer: deprioritize rendering, pre-allocate height for CLS stability */
.site-footer {
  content-visibility: auto;
  contain-intrinsic-size: 0 600px;
}

/* --- Compliance Notes ---
- All selectors use kebab-case per OUTPUT_RULES.md
- No duplicate or overlapping rules; categories clarified for maintainability
- All optimizations reference TCNA 2024, NJ HIC, and WCAG 2.1 AA where applicable
- Alt text and responsive image requirements enforced at HTML level (see DOMAIN.md)
*/
