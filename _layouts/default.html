<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
      {% if page.seo_title %}
        {{ page.seo_title }}
      {% elsif page.title %}
        {{ page.title }} | {{ site.tagline | default: 'Tillerstead LLC' }}
      {% else %}
        {{ site.title }} | {{ site.tagline | default: 'Property Maintenance, Remodeling & Tile in South Jersey' }}
      {% endif %}
    </title>
    {% include head.html %}
  </head>

  <body class="site-body ts-page ts-theme {{ page.body_class | default: '' }}">
    <!-- Accessibility: Skip to main content link -->
    <a class="skip-link" href="#main" tabindex="1">Skip to main content</a>

    {%- comment -%} Inline logo sprite to avoid extra request {%- endcomment -%}
    {%- include logo-sprite-inline.html -%}

    {%- comment -%}Construction banner removed (deprecated).{%- endcomment -%}

    <!-- Page header with navigation -->
    {% include header.html %}

    <!-- Main content area -->
    <main id="main" class="site-main ts-section ts-surface" role="main" tabindex="-1">
      
      <!-- Breadcrumb navigation (hidden on homepage) -->
      {%- include breadcrumbs.html -%}

      {%- comment -%}
      BreadcrumbList JSON-LD (lightweight; avoids duplication with inline microdata)
      Generated only for non-home pages.
      {%- endcomment -%}
      {%- if page.url != '/' and page.url != '/index.html' and page.is_home != true and page.layout != 'home' and page.breadcrumb != false -%}
        {%- assign crumb_position = 1 -%}
        {%- assign path = page.url | replace: 'index.html', '' -%}
        {%- assign segments = path | split: '/' -%}
        {%- assign crumbs = '' -%}
        {%- assign crumbs = crumbs | append: '{"@type":"ListItem","position":' | append: crumb_position | append: ',"name":"Home","item":"' | append: site.url | append: '/"}' -%}
        {%- assign crumb_position = crumb_position | plus: 1 -%}
        {%- assign current_path = '' -%}
        {%- for segment in segments -%}
          {%- if segment != '' -%}
            {%- assign current_path = current_path | append: '/' | append: segment -%}
            {%- assign is_last = forloop.last -%}
            {%- if is_last -%}
              {%- assign label = page.breadcrumb_title | default: page.title | default: segment | replace: '-', ' ' | capitalize -%}
            {%- else -%}
              {%- assign label = segment | replace: '-', ' ' | capitalize -%}
            {%- endif -%}
            {%- assign crumbs = crumbs | append: ',{"@type":"ListItem","position":' | append: crumb_position | append: ',"name":"' | append: label | append: '","item":"' | append: site.url | append: current_path | append: '/"}' -%}
            {%- assign crumb_position = crumb_position | plus: 1 -%}
          {%- endif -%}
        {%- endfor -%}
        <script type="application/ld+json">
        {"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{{ crumbs }}]}
        </script>
      {%- endif -%}

      <!-- Page hero section (unless hidden) -->
      {%- if page.hide_hero != true -%}
        {%- include page-hero.html -%}
      {%- endif -%}

      <!-- Page content: full-width or contained -->
      {% if page.is_home or page.full_width %}
        {{ content }}
      {% else %}
        <article class="page-content section" itemscope itemtype="https://schema.org/WebPage">
          <meta itemprop="name" content="{{ page.title | default: site.title }}">
          {% if page.description %}
            <meta itemprop="description" content="{{ page.description }}">
          {% endif %}
          <div class="container">
            {{ content }}
          </div>
        </article>
      {% endif %}

    </main>

    <!-- Page footer -->
    {% include footer.html %}

    <!-- Scripts (deferred for performance) -->
    {% include scripts.html %}

    <!-- Structured data for current page (if provided in front-matter) -->
    {% if page.structured_data %}
      <script type="application/ld+json">
        {{ page.structured_data | jsonify }}
      </script>
    {% endif %}
  </body>
</html>
